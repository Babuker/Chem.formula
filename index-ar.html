<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุจุฑูุงูุฌ ุชุตููู ุงูุชุฑููุจุฉ ุงูููููุงุฆูุฉ ุงููุซุงููุฉ ุงูุงูุชุตุงุฏูุฉ</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>๐งช</text></svg>">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <style>
        /* RTL Specific Styles */
        :root[lang="ar"] {
            font-family: 'Segoe UI', 'Tahoma', 'Geneva', 'Verdana', sans-serif;
        }
        
        .lang-switcher {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
        }
        
        .lang-btn {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }
        
        .lang-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }
        
        /* RTL Input adjustments */
        .input-with-unit input {
            border-radius: 0 8px 8px 0 !important;
            border-left: 2px solid #e0e0e0 !important;
            border-right: none !important;
            padding-right: 50px !important;
            text-align: right;
        }
        
        .input-with-unit .unit {
            border-radius: 8px 0 0 8px !important;
            border-right: 2px solid #e0e0e0 !important;
            border-left: none !important;
            text-align: center;
        }
        
        select, input, textarea {
            text-align: right;
        }
        
        .formula-table th, .specifications-table th {
            text-align: right !important;
        }
        
        .formula-table td, .specifications-table td {
            text-align: right !important;
        }
        
        /* Toast Styles for RTL */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 30px;
            background: #333;
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
            z-index: 10000;
            opacity: 0;
            transform: translateY(100px);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            max-width: 400px;
            direction: rtl;
        }
        
        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .toast.success {
            background: linear-gradient(135deg, #27ae60, #219653);
        }
        
        .toast.error {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }
        
        .toast.info {
            background: linear-gradient(135deg, #3498db, #2980b9);
        }
        
        .toast.warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }
        
        .toast i {
            font-size: 1.2rem;
        }
        
        /* Status Badges */
        .status {
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: 600;
            display: inline-block;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
        }
        
        .status.warning {
            background: #fff3cd;
            color: #856404;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
        }
        
        /* Compliance Badge */
        .compliance-badge {
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 700;
            display: inline-block;
        }
        
        .compliance-badge.bp {
            background: linear-gradient(135deg, #4a90e2, #2c7dd2);
            color: white;
        }
        
        .compliance-badge.usp {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            color: white;
        }
    </style>
</head>
<body lang="ar">
    <!-- Language Switcher -->
    <div class="lang-switcher">
        <button class="lang-btn" onclick="switchLanguage('en')">
            <i class="fas fa-language"></i>
            English
        </button>
    </div>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-atom"></i>
                    <div class="logo-text">
                        <h1>ุจุฑูุงูุฌ ุชุตููู ุงูุชุฑููุจุฉ ุงูููููุงุฆูุฉ</h1>
                        <p>ุงูุชูุงุฒู ุงูุฃูุซู ุจูู ุงูุฃุฏุงุก ูุงูุชูููุฉ ุจุงุณุชุฎุฏุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู</p>
                    </div>
                </div>
                <nav>
                    <ul>
                        <li><a href="#"><i class="fas fa-home"></i> ุงูุฑุฆูุณูุฉ</a></li>
                        <li><a href="#"><i class="fas fa-book"></i> ุงูุชูุซูู</a></li>
                        <li><a href="#"><i class="fas fa-database"></i> ูุงุนุฏุฉ ุงูุจูุงูุงุช</a></li>
                        <li><a href="#"><i class="fas fa-envelope"></i> ุงุชุตู ุจูุง</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>
    
    <div class="container">
        <div class="main-content">
            <!-- Form Section -->
            <section class="form-section">
                <div class="section-title">
                    <i class="fas fa-sliders-h"></i>
                    <h2>ุฅุนุฏุงุฏุงุช ุงูุชุตููู</h2>
                </div>
                
                <form id="formulaForm">
                    <!-- Basic Information Section -->
                    <div class="basic-info-section">
                        <div class="section-title" style="border: none; padding: 0; margin: 0 0 15px 0;">
                            <i class="fas fa-info-circle"></i>
                            <h3 style="font-size: 1.2rem;">ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ</h3>
                        </div>
                        
                        <div class="form-group">
                            <label for="formulaName"><i class="fas fa-tag"></i> ุงุณู ุงูุชุฑููุจุฉ ุงููุทููุจุฉ</label>
                            <input type="text" id="formulaName" placeholder="ูุซุงู: ุจุงุฑุงุณูุชุงููู 500 ููุฌ - ุชุฑููุฒ ุนุงูู" required>
                        </div>
                        
                        <div class="form-group">
                            <label><i class="fas fa-book-medical"></i> ุงููุฑุฌุนูุฉ (Pharmacopeia)</label>
                            <div class="reference-badges">
                                <div class="reference-badge bp active" data-reference="bp">
                                    <i class="fas fa-flag-uk"></i> British Pharmacopoeia (BP)
                                </div>
                                <div class="reference-badge usp" data-reference="usp">
                                    <i class="fas fa-flag-usa"></i> United States Pharmacopeia (USP)
                                </div>
                            </div>
                            <input type="hidden" id="reference" value="bp" required>
                        </div>
                        
                        <div class="form-group">
                            <label><i class="fas fa-pills"></i> ุดูู ุงูููุชุฌ ุงููุทููุจ</label>
                            <div class="product-form-options">
                                <div class="product-form-option active" data-form="tablet-uncoated">
                                    <i class="fas fa-tablet-alt"></i>
                                    <div>ูุฑุต ุบูุฑ ูุบูู</div>
                                    <small>Uncoated Tablet</small>
                                </div>
                                <div class="product-form-option" data-form="tablet-coated">
                                    <i class="fas fa-tablet-alt"></i>
                                    <div>ูุฑุต ูุบูู</div>
                                    <small>Coated Tablet</small>
                                </div>
                                <div class="product-form-option" data-form="capsule">
                                    <i class="fas fa-capsules"></i>
                                    <div>ูุจุณููุฉ</div>
                                    <small>Capsule</small>
                                </div>
                                <div class="product-form-option" data-form="syrup">
                                    <i class="fas fa-wine-bottle"></i>
                                    <div>ุดุฑุงุจ</div>
                                    <small>Syrup</small>
                                </div>
                                <div class="product-form-option" data-form="powder">
                                    <i class="fas fa-mortar-pestle"></i>
                                    <div>ูุณุญูู</div>
                                    <small>Powder</small>
                                </div>
                            </div>
                            <input type="hidden" id="productForm" value="tablet-uncoated" required>
                        </div>
                    </div>
                    
                    <!-- Active Ingredients Section -->
                    <div class="active-ingredient-section">
                        <div class="section-title" style="border: none; padding: 0; margin: 0 0 15px 0;">
                            <i class="fas fa-vial"></i>
                            <h3 style="font-size: 1.2rem;">ุงููุงุฏุฉ/ุงูููุงุฏ ุงููุนุงูุฉ</h3>
                        </div>
                        
                        <div id="activeIngredientsContainer">
                            <!-- ุงูุตู ุงูุฃูู ูููุงุฏุฉ ุงููุนุงูุฉ -->
                            <div class="ingredient-row">
                                <select class="active-ingredient" required>
                                    <option value="">ุงุฎุชุฑ ุงููุงุฏุฉ ุงููุนุงูุฉ...</option>
                                    <option value="paracetamol">ุจุงุฑุงุณูุชุงููู (Paracetamol)</option>
                                    <option value="ibuprofen">ุขูุจูุจุฑูููู (Ibuprofen)</option>
                                    <option value="amoxicillin">ุฃูููุณูุณูููู (Amoxicillin)</option>
                                    <option value="silver-iodide">ููุฏูุฏ ุงููุถุฉ (Silver Iodide)</option>
                                    <option value="titanium-dioxide">ุซุงูู ุฃูุณูุฏ ุงูุชูุชุงูููู (TiOโ)</option>
                                    <option value="sodium-hypochlorite">ููุจููููุฑูุช ุงูุตูุฏููู (NaClO)</option>
                                    <option value="vitamin-c">ููุชุงููู ุฌ (Ascorbic Acid)</option>
                                </select>
                                
                                <div class="input-with-unit">
                                    <input type="number" class="active-ingredient-amount" min="1" max="10000" step="0.1" value="500" required>
                                    <div class="unit">ูุฌู</div>
                                </div>
                                
                                <button type="button" class="remove-ingredient" onclick="removeIngredientRow(this)">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        
                        <button type="button" class="btn btn-secondary" onclick="addIngredientRow()" style="margin-top: 10px;">
                            <i class="fas fa-plus"></i> ุฅุถุงูุฉ ูุงุฏุฉ ูุนุงูุฉ ุฃุฎุฑู
                        </button>
                        
                        <div class="form-group" style="margin-top: 15px;">
                            <label for="totalWeight"><i class="fas fa-weight"></i> ุงููุฒู/ุงูุญุฌู ุงูููู ููุชุฑููุจุฉ</label>
                            <div class="input-with-unit">
                                <input type="number" id="totalWeight" min="1" max="10000" step="1" value="1000" required>
                                <div class="unit">ูุฌู (ููู ูุญุฏุฉ)</div>
                            </div>
                            <small style="color: #666; display: block; margin-top: 5px;">ุงููุฒู ุงูุฅุฌูุงูู ููุชุฑููุจุฉ ุงูููุงุฆูุฉ (ููู ูุฑุตุ ูุจุณููุฉุ ููุ ุฅูุฎ)</small>
                        </div>
                    </div>
                    
                    <!-- Input Method Section -->
                    <div class="input-method-section">
                        <div class="section-title" style="border: none; padding: 0; margin: 0 0 15px 0;">
                            <i class="fas fa-tools"></i>
                            <h3 style="font-size: 1.2rem;">ุทุฑููุฉ ุฅุถุงูุฉ ุงูููุงุฏ ุงููุณุงุนุฏุฉ</h3>
                        </div>
                        
                        <div class="input-method-options">
                            <div class="input-method-option" id="manualOption" onclick="selectInputMethod('manual')">
                                <i class="fas fa-hand-pointer"></i>
                                <h4>ุงูุงุฎุชูุงุฑ ุงููุฏูู</h4>
                                <p>ุงุฎุชุฑ ุงูููุงุฏ ุงููุถุงูุฉ ูุฏููุงู ูุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู ุญุณุจ ุฎุจุฑุชู</p>
                                <div style="margin-top: 10px; font-size: 0.8rem; color: #f57c00;">
                                    <i class="fas fa-user-edit"></i> ููุงุณุจ ูููุชุฎุตุตูู
                                </div>
                            </div>
                            
                            <div class="input-method-option selected" id="autoOption" onclick="selectInputMethod('auto')">
                                <i class="fas fa-robot"></i>
                                <h4>ุงูุฅุฏุฎุงู ุงูุขูู</h4>
                                <p>ุงูุจุฑูุงูุฌ ูุฎุชุงุฑ ุงูููุงุฏ ุงููุถุงูุฉ ุชููุงุฆูุงู ุจูุงุกู ุนูู ูุนุงููุฑู</p>
                                <div style="margin-top: 10px; font-size: 0.8rem; color: #388e3c;">
                                    <i class="fas fa-bolt"></i> ุณุฑูุน ูุฐูู
                                </div>
                            </div>
                        </div>
                        <input type="hidden" id="inputMethod" value="auto">
                    </div>
                    
                    <!-- Manual Input Section -->
                    <div class="manual-input-section" id="manualInputSection">
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: var(--dark-color); margin-bottom: 15px;">
                                <i class="fas fa-plus-circle"></i> ุฃุถู ุงูููุงุฏ ุงููุณุงุนุฏุฉ ูุฏููุงู
                            </h4>
                            
                            <div class="add-excipient-form">
                                <div class="form-group">
                                    <label for="excipientName">ุงุณู ุงููุงุฏุฉ</label>
                                    <select id="excipientName">
                                        <option value="">ุงุฎุชุฑ ุงููุงุฏุฉ...</option>
                                        <optgroup label="ุงูููุงุฏ ุงููุงูุฆุฉ">
                                            <option value="lactose">ูุงูุชูุฒ ุงููุงูุงุฆู</option>
                                            <option value="mcc">ุณูููููุฒ ูููุฑููุฑูุณุชุงูููู (MCC)</option>
                                            <option value="mannitol">ูุงููุชูู</option>
                                            <option value="dibasic-calcium-phosphate">ููุณูุงุช ุงููุงูุณููู ุซูุงุฆู ุงูุฃุณุงุณ</option>
                                            <option value="starch">ูุดุง ุงูุฐุฑุฉ</option>
                                        </optgroup>
                                        <optgroup label="ุงูููุงุฏ ุงูุฑุงุจุทุฉ">
                                            <option value="povidone">ุจูููุฏูู (Povidone)</option>
                                            <option value="hpmc">ููุฏุฑููุณู ุจุฑูุจูู ููุซูู ุณูููููุฒ (HPMC)</option>
                                            <option value="gelatin">ุฌููุงุชูู</option>
                                            <option value="acacia">ุตูุบ ุนุฑุจู</option>
                                        </optgroup>
                                        <optgroup label="ุงูููุงุฏ ุงูููููุฉ">
                                            <option value="croscarmellose">ุตูุฏููู ูุฑููุงุฑููููุฒ</option>
                                            <option value="crospovidone">ูุฑูุณูพูููุฏูู</option>
                                            <option value="sodium-starch-glycolate">ูุดุง ุงูุตูุฏููู ุฌูููููุงุช</option>
                                        </optgroup>
                                        <optgroup label="ุงูููุงุฏ ุงููุฒููุฉ">
                                            <option value="magnesium-stearate">ุณุชูุฑุงุช ุงููุบููุณููู</option>
                                            <option value="talc">ุงูุชูู</option>
                                            <option value="silicon-dioxide">ุซุงูู ุฃูุณูุฏ ุงูุณูููููู</option>
                                            <option value="stearic-acid">ุญูุถ ุงูุดูุน</option>
                                        </optgroup>
                                        <option value="custom">ูุงุฏุฉ ูุฎุตุตุฉ...</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="excipientFunction">ุงููุธููุฉ</label>
                                    <select id="excipientFunction">
                                        <option value="filler">ูุงุฏุฉ ูุงูุฆุฉ</option>
                                        <option value="binder">ูุงุฏุฉ ุฑุงุจุทุฉ</option>
                                        <option value="disintegrant">ูุงุฏุฉ ููููุฉ</option>
                                        <option value="lubricant">ูุงุฏุฉ ูุฒููุฉ</option>
                                        <option value="coating">ูุงุฏุฉ ุทูุงุก</option>
                                        <option value="preservative">ูุงุฏุฉ ุญุงูุธุฉ</option>
                                        <option value="colorant">ูููู</option>
                                        <option value="flavor">ููููู</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="excipientPercentage">ุงููุณุจุฉ (%)</label>
                                    <div class="input-with-unit">
                                        <input type="number" id="excipientPercentage" min="0.1" max="100" step="0.1" value="5">
                                        <div class="unit">%</div>
                                    </div>
                                </div>
                                
                                <div>
                                    <button type="button" class="btn" onclick="addManualExcipient()" style="padding: 10px; margin-top: 0;">
                                        <i class="fas fa-plus"></i> ุฅุถุงูุฉ
                                    </button>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="customExcipientName" style="display: none;" id="customNameLabel">ุงุณู ุงููุงุฏุฉ ุงููุฎุตุตุฉ</label>
                                <input type="text" id="customExcipientName" placeholder="ุฃุฏุฎู ุงุณู ุงููุงุฏุฉ ุงููุฎุตุตุฉ" style="display: none;">
                            </div>
                        </div>
                        
                        <div>
                            <h5 style="color: var(--dark-color); margin-bottom: 10px;">
                                <i class="fas fa-list"></i> ูุงุฆูุฉ ุงูููุงุฏ ุงููุถุงูุฉ ูุฏููุงู
                                <span id="manualExcipientsCount" style="font-size: 0.9rem; color: #666; margin-right: 10px;">(0 ูุงุฏุฉ)</span>
                            </h5>
                            
                            <div class="manual-excipients-list" id="manualExcipientsList">
                                <div style="text-align: center; padding: 30px; color: #999;">
                                    <i class="fas fa-inbox" style="font-size: 2rem; margin-bottom: 10px;"></i>
                                    <p>ูู ูุชู ุฅุถุงูุฉ ุฃู ููุงุฏ ูุณุงุนุฏุฉ ุจุนุฏ</p>
                                    <small>ุงุณุชุฎุฏู ุงููููุฐุฌ ุฃุนูุงู ูุฅุถุงูุฉ ุงูููุงุฏ</small>
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
                            <button type="button" class="btn btn-secondary" onclick="clearManualExcipients()" style="flex: 1; min-width: 150px;">
                                <i class="fas fa-trash-alt"></i> ูุณุญ ุงููู
                            </button>
                            <button type="button" class="btn" onclick="loadCommonFormulation()" style="flex: 1; min-width: 150px; background-color: #5c6bc0;">
                                <i class="fas fa-magic"></i> ุชุญููู ุชุฑููุจุฉ ุดุงุฆุนุฉ
                            </button>
                        </div>
                    </div>
                    
                    <!-- Auto Input Section -->
                    <div class="auto-input-section" id="autoInputSection">
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: var(--dark-color); margin-bottom: 10px;">
                                <i class="fas fa-cogs"></i> ุฅุนุฏุงุฏุงุช ุงูุงุฎุชูุงุฑ ุงูุขูู
                            </h4>
                            <p style="color: #666; margin-bottom: 15px;">
                                ุณูุฎุชุงุฑ ุงูุจุฑูุงูุฌ ุงูููุงุฏ ุงููุถุงูุฉ ุชููุงุฆูุงู ุจูุงุกู ุนูู ุงููุนุงููุฑ ุงูุชุงููุฉ:
                            </p>
                            
                            <div class="auto-options">
                                <div class="auto-option">
                                    <h5><i class="fas fa-money-bill-wave"></i> ุงุณุชุฑุงุชูุฌูุฉ ุงูุชูููุฉ</h5>
                                    <p>ุงุฎุชุฑ ุฃููููุฉ ุงูุชูููุฉ ูู ุงุฎุชูุงุฑ ุงูููุงุฏ:</p>
                                    <select id="costStrategy" style="width: 100%; padding: 8px; border-radius: 6px; border: 1px solid #ddd;">
                                        <option value="lowest">ุฃูู ุชูููุฉ ููููุฉ</option>
                                        <option value="balanced" selected>ุชูุงุฒู ุจูู ุงูุชูููุฉ ูุงูุฌูุฏุฉ</option>
                                        <option value="premium">ุฃูุถู ุฌูุฏุฉ ุจุบุถ ุงููุธุฑ ุนู ุงูุชูููุฉ</option>
                                    </select>
                                </div>
                                
                                <div class="auto-option">
                                    <h5><i class="fas fa-industry"></i> ุงุณุชุฑุงุชูุฌูุฉ ุงูุฅูุชุงุฌ</h5>
                                    <p>ุงุฎุชุฑ ุฃููููุฉ ุนูููุฉ ุงูุชุตููุน:</p>
                                    <select id="productionStrategy" style="width: 100%; padding: 8px; border-radius: 6px; border: 1px solid #ddd;">
                                        <option value="easy-processing">ุณูููุฉ ุงูุชุตููุน</option>
                                        <option value="high-speed" selected>ุณุฑุนุฉ ุฅูุชุงุฌ ุนุงููุฉ</option>
                                        <option value="stability">ุซุจุงุช ูููุซูููุฉ</option>
                                    </select>
                                </div>
                                
                                <div class="auto-option">
                                    <h5><i class="fas fa-leaf"></i> ูุนุงููุฑ ุฎุงุตุฉ</h5>
                                    <div style="margin-top: 10px;">
                                        <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                                            <input type="checkbox" id="vegetarianCapsules" value="vegetarian">
                                            <span>ูุจุณููุงุช ูุจุงุชูุฉ (ุฎุงููุฉ ูู ุงูุฌููุงุชูู)</span>
                                        </label>
                                        <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                                            <input type="checkbox" id="sugarFree" value="sugar-free">
                                            <span>ุฎุงูู ูู ุงูุณูุฑ</span>
                                        </label>
                                        <label style="display: flex; align-items: center; gap: 8px;">
                                            <input type="checkbox" id="preservativeFree" value="preservative-free">
                                            <span>ุฎุงูู ูู ุงูููุงุฏ ุงูุญุงูุธุฉ</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="auto-option">
                                    <h5><i class="fas fa-bolt"></i> ุฃุฏุงุก ุงูุชุฑููุจุฉ</h5>
                                    <p>ุงุฎุชุฑ ุฃููููุฉ ุงูุฃุฏุงุก:</p>
                                    <select id="performancePriority" style="width: 100%; padding: 8px; border-radius: 6px; border: 1px solid #ddd;">
                                        <option value="fast-release">ุชุญุฑุฑ ุณุฑูุน</option>
                                        <option value="sustained-release" selected>ุชุญุฑุฑ ูุณุชูุฑ</option>
                                        <option value="targeted-release">ุชุญุฑุฑ ููุฌู</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h5 style="color: var(--dark-color); margin-bottom: 10px;">
                                <i class="fas fa-eye"></i> ูุนุงููุฉ ุงูููุงุฏ ุงูููุชุฑุญุฉ
                            </h5>
                            
                            <div style="background-color: white; padding: 15px; border-radius: 8px; border: 1px solid #c8e6c9;">
                                <p style="margin-bottom: 10px; color: #666;">
                                    ุจูุงุกู ุนูู ุฅุนุฏุงุฏุงุชูุ ุณูุฎุชุงุฑ ุงูุจุฑูุงูุฌ ุงูููุงุฏ ุงูุชุงููุฉ ุชููุงุฆูุงู:
                                </p>
                                
                                <div class="auto-excipients-preview" id="autoExcipientsPreview">
                                    <div class="auto-excipient-tag">ุณูููููุฒ ูููุฑููุฑูุณุชุงูููู</div>
                                    <div class="auto-excipient-tag">ุจูููุฏูู</div>
                                    <div class="auto-excipient-tag">ูุฑูุณูุงุฑููููุฒ</div>
                                    <div class="auto-excipient-tag">ุณุชูุฑุงุช ูุบููุณููู</div>
                                </div>
                                
                                <div style="margin-top: 15px; text-align: center;">
                                    <button type="button" class="btn btn-secondary" onclick="regenerateAutoSuggestions()" style="padding: 8px 20px;">
                                        <i class="fas fa-sync-alt"></i> ุฅุนุงุฏุฉ ุชูููุฏ ุงูููุชุฑุญุงุช
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 15px; background-color: #e3f2fd; padding: 12px; border-radius: 8px;">
                            <p style="margin: 0; color: #1565c0; font-size: 0.9rem;">
                                <i class="fas fa-lightbulb"></i> 
                                <strong>ุชูููุญ:</strong> ูุณุชุฎุฏู ุงูุจุฑูุงูุฌ ุฎูุงุฑุฒููุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุชุญููู ุฃูุซุฑ ูู 1000 ุชุฑููุจุฉ ูุงุฎุชูุงุฑ ุงูุฃูุถู ุจูุงุกู ุนูู ูุนุงููุฑู.
                            </p>
                        </div>
                    </div>
                    
                    <!-- Additional Settings -->
                    <div class="form-group">
                        <label for="primaryGoal"><i class="fas fa-bullseye"></i> ุงููุฏู ุงูุฃุณุงุณู ููุชุตููู</label>
                        <select id="primaryGoal" required>
                            <option value="">ุงุฎุชุฑ ุงููุฏู ุงูุฃุณุงุณู...</option>
                            <option value="min-cost">ุงูุญุฏ ุงูุฃุฏูู ููุชูููุฉ</option>
                            <option value="max-performance">ุงูุญุฏ ุงูุฃูุตู ููุฃุฏุงุก</option>
                            <option value="balanced" selected>ุชูุงุฒู ุจูู ุงูุชูููุฉ ูุงูุฃุฏุงุก</option>
                            <option value="fast-production">ุณุฑุนุฉ ุงูุฅูุชุงุฌ</option>
                            <option value="eco-friendly">ุตุฏูู ููุจูุฆุฉ</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="budget"><i class="fas fa-money-bill-wave"></i> ุงูููุฒุงููุฉ ุงููุณุชูุฏูุฉ</label>
                        <input type="range" id="budget" min="10" max="1000" value="200" step="10">
                        <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                            <span>ููุฎูุถุฉ (10)</span>
                            <span id="budgetValue">200</span>
                            <span>ุนุงููุฉ (1000)</span>
                        </div>
                        <small style="color: #666;">ุงูุชูููุฉ ููู ูุฌู ูู ุงูููุชุฌ ุงูููุงุฆู</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="notes"><i class="fas fa-sticky-note"></i> ููุงุญุธุงุช ุฅุถุงููุฉ</label>
                        <textarea id="notes" placeholder="ุฃู ูุชุทูุจุงุช ุฎุงุตุฉุ ุญุณุงุณูุงุชุ ููุงุฏ ููููุนุฉุ ุฃู ุฅุฑุดุงุฏุงุช ุฎุงุตุฉ..." rows="3"></textarea>
                    </div>
                    
                    <button type="submit" class="btn" id="calculateBtn">
                        <i class="fas fa-calculator"></i> ุชุตููู ุงูุชุฑููุจุฉ ุงููุซุงููุฉ
                    </button>
                </form>
            </section>
            
            <!-- Results Section -->
            <section class="results-section">
                <div class="section-title">
                    <i class="fas fa-chart-line"></i>
                    <h2>ุงููุชุงุฆุฌ ูุงูุชุฑููุจุฉ ุงููุซุงููุฉ</h2>
                </div>
                
                <div id="resultsPlaceholder" class="results-placeholder">
                    <i class="fas fa-search"></i>
                    <h3>ุงููุชุงุฆุฌ ุณุชุธูุฑ ููุง</h3>
                    <p>ูู ุจููุก ุงููููุฐุฌ ุนูู ุงููุณุงุฑ ุซู ุงุถุบุท ุนูู "ุชุตููู ุงูุชุฑููุจุฉ ุงููุซุงููุฉ"</p>
                    <div style="margin-top: 20px; color: #666; max-width: 400px;">
                        <small>ุงูุจุฑูุงูุฌ ุณูุญูู ุฃูุซุฑ ูู 1000 ุชุฑููุจุฉ ูุญุชููุฉ ููุฌุฏ ุงูุฃูุณุจ ุจูุงุกู ุนูู ูุนุงููุฑู</small>
                    </div>
                </div>
                
                <!-- ูุณู ุงููุชุงุฆุฌ ุงูุฑุฆูุณู -->
                <div id="resultsContent" class="results-content" style="display: none;">
                    <div class="formula-header">
                        <div>
                            <div class="formula-name-display" id="formulaNameDisplay">ุจุงุฑุงุณูุชุงููู 500 ูุฌู</div>
                            <div class="formula-meta">
                                <span class="meta-badge reference bp" id="referenceBadge">BP</span>
                                <span class="meta-badge form" id="formBadge">ูุฑุต ุบูุฑ ูุบูู</span>
                                <span><i class="far fa-calendar"></i> ุชุงุฑูุฎ ุงูุชุตููู: <span id="designDate">2024-01-17</span></span>
                            </div>
                        </div>
                        <div class="cost-badge" id="totalCost">$0.42/ููู 1000 ูุฑุต</div>
                    </div>
                    
                    <div class="formula-details">
                        <h4><i class="fas fa-list-alt"></i> ููููุงุช ุงูุชุฑููุจุฉ ุงููุซุงููุฉ:</h4>
                        <div class="table-container">
                            <table class="formula-table" id="formulaTable">
                                <thead>
                                    <tr>
                                        <th>ุงููุงุฏุฉ</th>
                                        <th>ุงููููุฉ/ุงููุณุจุฉ</th>
                                        <th>ุงููุธููุฉ</th>
                                        <th>ุงูุชูููุฉ</th>
                                        <th>ุงููุฑุฌุนูุฉ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- ุณูุชู ููุคูุง ุจูุงุณุทุฉ JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="formula-details">
                        <h4><i class="fas fa-chart-pie"></i> ุงูุชูุฒูุน ุงููุณุจู</h4>
                        <div style="max-width: 500px; margin: 20px auto;">
                            <canvas id="formulaChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="formula-details">
                        <h4><i class="fas fa-award"></i> ููุงุตูุงุช ุงูุฌูุฏุฉ (<span id="specsReference">BP</span>):</h4>
                        <div class="table-container">
                            <table class="specifications-table bp" id="specificationsTable">
                                <thead>
                                    <tr>
                                        <th>ุงูุงุฎุชุจุงุฑ</th>
                                        <th>ุงูููุงุตูุงุช</th>
                                        <th>ูุชูุฌุฉ ุงูุชุฑููุจุฉ</th>
                                        <th>ุงูุญุงูุฉ</th>
                                    </tr>
                                </thead>
                                <tbody id="specificationsBody">
                                    <!-- ุณูุชู ููุคูุง ุจูุงุณุทุฉ JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="performance-metrics" id="performanceMetrics">
                        <!-- ุณูุชู ููุคูุง ุจูุงุณุทุฉ JavaScript -->
                    </div>
                    
                    <div style="margin-top: 25px; display: flex; gap: 10px; flex-wrap: wrap;">
                        <button class="btn btn-success" onclick="exportResults()" style="flex: 1; min-width: 200px;">
                            <i class="fas fa-file-export"></i> ุชุตุฏูุฑ ุงูุชูุฑูุฑ
                        </button>
                        <button class="btn" onclick="saveFormula()" style="flex: 1; min-width: 200px; background-color: var(--primary-color);">
                            <i class="fas fa-save"></i> ุญูุธ ุงูุชุฑููุจุฉ
                        </button>
                        <button class="btn btn-info" onclick="printResults()" style="flex: 1; min-width: 200px;">
                            <i class="fas fa-print"></i> ุทุจุงุนุฉ ุงููุชุงุฆุฌ
                        </button>
                    </div>
                </div>
            </section>
        </div>
        
        <!-- Examples Section -->
        <section class="examples-section">
            <div class="section-title">
                <i class="fas fa-vial"></i>
                <h2>ุฃูุซูุฉ ุณุฑูุนุฉ ููุจุฏุก</h2>
            </div>
            
            <div class="examples-grid">
                <div class="example-card" onclick="loadExample('paracetamol')">
                    <h4><i class="fas fa-tablets"></i> ูุฑุต ุจุงุฑุงุณูุชุงููู ุงูุชุตุงุฏู</h4>
                    <p>ุชุฑููุจุฉ ูุซุงููุฉ ููุฑุต ุจุงุฑุงุณูุชุงููู 500 ูุฌู ูุน ุชุญููู ุฃูู ุชูููุฉ ูุน ุงูุญูุงุธ ุนูู ูุนุงููุฑ ุงูุฌูุฏุฉ.</p>
                    <div class="example-tags">
                        <span class="tag">ุฏูุงุฆู</span>
                        <span class="tag">ุงูุชุตุงุฏู</span>
                        <span class="tag">ูุซุจุช</span>
                    </div>
                </div>
                
                <div class="example-card" onclick="loadExample('cloud-seeding')">
                    <h4><i class="fas fa-cloud-rain"></i> ูุญููู ุงุณุชูุทุงุฑ ุงูุณุญุจ</h4>
                    <p>ุชุฑููุจุฉ ูุนุงูุฉ ูู ููุฏูุฏ ุงููุถุฉ ูุน ููุงุฏ ูุงููุฉ ูุชุญููุฒ ูุทูู ุงูุฃูุทุงุฑ ุจุฃูู ุชูููุฉ ููููุฉ.</p>
                    <div class="example-tags">
                        <span class="tag">ููุฏุณุฉ ููุงุฎ</span>
                        <span class="tag">ุจูุฆู</span>
                        <span class="tag">ุงูุชุตุงุฏู</span>
                    </div>
                </div>
                
                <div class="example-card" onclick="loadExample('paint')">
                    <h4><i class="fas fa-paint-roller"></i> ุฏูุงู ุฏุงุฎูู ุงูุชุตุงุฏู</h4>
                    <p>ุชุฑููุจุฉ ุฏูุงู ุฌุฏุฑุงู ุฏุงุฎูู ุนุงูู ุงูุฌูุฏุฉ ูุน ุชูููู ุชูููุฉ ุงูููุงุฏ ุงูุฃูููุฉ ุจูุณุจุฉ 22%.</p>
                    <div class="example-tags">
                        <span class="tag">ุฏูุงูุงุช</span>
                        <span class="tag">ุชูููุฑ</span>
                        <span class="tag">ุนุงูู ุงูุฌูุฏุฉ</span>
                    </div>
                </div>
            </div>
        </section>
    </div>
    
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <i class="fas fa-atom"></i>
                    <h3>ุจุฑูุงูุฌ ุชุตููู ุงูุชุฑููุจุฉ ุงูููููุงุฆูุฉ</h3>
                </div>
                
                <div class="disclaimer">
                    <p><i class="fas fa-exclamation-triangle"></i> <strong>ุชูุจูู:</strong> ูุฐุง ุงูุจุฑูุงูุฌ ูู ุฃุฏุงุฉ ูุณุงุนุฏุฉ ููุชุฎุทูุท ูุงูุชุตููู ุงูุฃููู. ูุฌุจ ุงูุชุญูู ูู ุฌููุน ุงููุชุงุฆุฌ ูุนูููุงู ููุฑุงุฌุนุชูุง ูู ูุจู ููููุงุฆููู ูุคูููู ูุจู ุงูุชุทุจูู ุงูุนููู. ุงูุจุฑูุงูุฌ ูุง ูุชุญูู ูุณุคูููุฉ ุฃู ุฃุถุฑุงุฑ ูุฏ ุชูุชุฌ ุนู ุงุณุชุฎุฏุงู ุงูุชุฑููุจุงุช ุงููุตููุฉ.</p>
                </div>
                
                <p>ยฉ 2024 ุฌููุน ุงูุญููู ูุญููุธุฉ | ุชู ุงูุชุทููุฑ ุจุงุณุชุฎุฏุงู HTML, CSS, JavaScript</p>
            </div>
        </div>
    </footer>
    
    <!-- JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    
    <!-- Main JavaScript File -->
    <script src="script.js"></script>
    
    <!-- Page-Specific JavaScript -->
    <script>
        // Language switching function
        function switchLanguage(lang) {
            if (lang === 'en') {
                window.location.href = 'index.html';
            } else {
                window.location.href = 'index-ar.html';
            }
        }
        
        // Example loading function
        function loadExample(example) {
            if (example === 'paracetamol') {
                document.getElementById('formulaName').value = 'ูุฑุต ุจุงุฑุงุณูุชุงููู 500 ูุฌู';
                document.getElementById('reference').value = 'bp';
                document.querySelector('.reference-badge.bp').classList.add('active');
                document.querySelector('.reference-badge.usp').classList.remove('active');
                
                document.getElementById('productForm').value = 'tablet-uncoated';
                document.querySelectorAll('.product-form-option').forEach(opt => opt.classList.remove('active'));
                document.querySelector('.product-form-option[data-form="tablet-uncoated"]').classList.add('active');
                
                document.querySelector('.active-ingredient').value = 'paracetamol';
                document.querySelector('.active-ingredient-amount').value = '500';
                document.getElementById('totalWeight').value = '1000';
                
                document.getElementById('primaryGoal').value = 'min-cost';
                document.getElementById('budget').value = '150';
                document.getElementById('budgetValue').textContent = '150';
                
                showToast('ุชู ุชุญููู ูุซุงู ุงูุจุงุฑุงุณูุชุงููู ุจูุฌุงุญ!', 'success');
            } else if (example === 'cloud-seeding') {
                document.getElementById('formulaName').value = 'ูุญููู ุงุณุชูุทุงุฑ ุงูุณุญุจ - ููุฏูุฏ ุงููุถุฉ';
                document.querySelector('.active-ingredient').value = 'silver-iodide';
                document.querySelector('.active-ingredient-amount').value = '2';
                document.getElementById('totalWeight').value = '100';
                showToast('ุชู ุชุญููู ูุซุงู ุงุณุชูุทุงุฑ ุงูุณุญุจ!', 'info');
            }
        }
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Set default product form
            if (!document.getElementById('productForm').value) {
                document.getElementById('productForm').value = 'tablet-uncoated';
            }
            
            // Initialize budget display
            const budgetSlider = document.getElementById('budget');
            const budgetValue = document.getElementById('budgetValue');
            if (budgetSlider && budgetValue) {
                budgetValue.textContent = budgetSlider.value;
                budgetSlider.addEventListener('input', function() {
                    budgetValue.textContent = this.value;
                });
            }
            
            // Initialize custom excipient field
            const excipientName = document.getElementById('excipientName');
            if (excipientName) {
                excipientName.addEventListener('change', function() {
                    const customField = document.getElementById('customExcipientName');
                    const customLabel = document.getElementById('customNameLabel');
                    if (this.value === 'custom') {
                        customField.style.display = 'block';
                        customLabel.style.display = 'block';
                    } else {
                        customField.style.display = 'none';
                        customLabel.style.display = 'none';
                    }
                });
            }
            
            // Set RTL text alignment for tables
            document.querySelectorAll('.formula-table th, .specifications-table th').forEach(th => {
                th.style.textAlign = 'right';
            });
            
            document.querySelectorAll('.formula-table td, .specifications-table td').forEach(td => {
                td.style.textAlign = 'right';
            });
        });
    </script>
</body>
</html>
